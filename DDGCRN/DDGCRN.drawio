<mxfile host="app.diagrams.net" modified="2024-06-21T13:43:19.743Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0" etag="ibnFCMo_411Ig93aM9hC" version="24.5.5" type="github">
  <diagram name="第 1 页" id="yApHzeJYYiuHWeru3HxS">
    <mxGraphModel dx="1862" dy="453" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="WDNzToIDsKdzvG2eh07D-1" value="data(16992,&amp;nbsp; 307,&amp;nbsp; 1)" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="270" y="10" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-2" value="his=12&lt;div&gt;pred=12&lt;/div&gt;&lt;div&gt;batch=64&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;fontColor=#000000;darkOpacity=0.05;fillColor=#FFF9B2;strokeColor=none;fillStyle=solid;direction=west;gradientDirection=north;gradientColor=#FFF2A1;shadow=1;size=20;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="-70" y="30" width="140" height="160" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-3" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="334.8" y="40" as="sourcePoint" />
            <mxPoint x="335" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-6" value="x(16969,&amp;nbsp; 12,&amp;nbsp; 307, 1)&amp;nbsp; y(16969, 12, 307, 1)&lt;div&gt;x_day(16969, 12, 307, 1)&amp;nbsp; y_day(16969, 12, 307, 1)是0到1的数&lt;/div&gt;&lt;div&gt;x_week(16969, 12, 307, 1)&amp;nbsp; y_week(16969,12,307,1)&lt;/div&gt;" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="190" y="80" width="340" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WDNzToIDsKdzvG2eh07D-9" target="WDNzToIDsKdzvG2eh07D-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-9" value="x(16969, 12, 307, 3)&lt;div&gt;y(16969,12,307,3)&lt;/div&gt;" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="275" y="140" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-10" value="x_train(10182, 12, 307, 3)&lt;div&gt;y_train(10182,12,307,3)&lt;/div&gt;" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="257.5" y="210" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-12" value="data(64,12,307,3)&amp;nbsp; (flow, day,week)" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1010" y="10" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-13" value="i=2" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1220" y="10" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-14" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1140" y="40" as="sourcePoint" />
            <mxPoint x="1140" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-15" value="node_embedding1(307,10)可学习的参数" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1310" y="10" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WDNzToIDsKdzvG2eh07D-17">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1675" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-17" value="t_i_d_data   = source[..., 1]&lt;div&gt;（64，12，307）&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1590" y="10" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-24" value="self.T_i_D_emb[(t_i_d_data * 288)" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1690" y="50" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-25" value="T_i_D_emb（64，12，307，10）" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1582.5" y="100" width="185" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-26" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1419.58" y="40" as="sourcePoint" />
            <mxPoint x="1420" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-27" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1570" y="119.58" as="sourcePoint" />
            <mxPoint x="1420" y="119.58" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="torch.mul(node_embedding1, T_i_D_emb)" id="WDNzToIDsKdzvG2eh07D-28">
          <mxCell style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
            <mxGeometry x="1424" y="140" width="230" height="30" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="WDNzToIDsKdzvG2eh07D-29" value="node_embedding1（64，12，307，10）" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1300" y="270" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-30" value="t_i_d_data   = source[..., 1]&lt;div&gt;（64，12，307）&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1710" y="135" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-33" value="self.T_i_D_emb[(t_i_d_data * 288)" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1797.5" y="190" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-34" value="T_i_D_emb（64，12，307，10）" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1690" y="260" width="185" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-35" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1760" y="180" as="sourcePoint" />
            <mxPoint x="1760" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-38" value="" style="shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;" vertex="1" parent="1">
          <mxGeometry x="1420" y="300" width="330" height="60" as="geometry" />
        </mxCell>
        <UserObject label="torch.mul(node_embedding1, D_i_W_emb)" id="WDNzToIDsKdzvG2eh07D-39">
          <mxCell style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
            <mxGeometry x="440" y="240" width="260" height="40" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="torch.mul(node_embedding1, D_i_W_emb)" id="WDNzToIDsKdzvG2eh07D-40">
          <mxCell style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
            <mxGeometry x="1470" y="320" width="260" height="40" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="WDNzToIDsKdzvG2eh07D-43" value="node_embedding1（64，12，307，10）" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1480" y="370" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-44" value="source(64,12,307,1)&amp;nbsp; (flow)" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1021" y="95" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-45" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1140" y="125" as="sourcePoint" />
            <mxPoint x="1140" y="175" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="init_state1 = self.encoder1.init_hidden(source.shape[0])&lt;div&gt;(1,64,307,64)&lt;/div&gt;" id="WDNzToIDsKdzvG2eh07D-47">
          <mxCell style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
            <mxGeometry x="650" y="20" width="330" height="40" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="WDNzToIDsKdzvG2eh07D-48" value="self.encoder1(source, init_state1, node_embeddings)" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1100" y="130" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WDNzToIDsKdzvG2eh07D-49" target="WDNzToIDsKdzvG2eh07D-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-49" value="output(64,12,307,64)&amp;nbsp; (flow)" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1030" y="190" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WDNzToIDsKdzvG2eh07D-52" target="WDNzToIDsKdzvG2eh07D-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-52" value="output(64,1,307,64)&amp;nbsp; (flow)" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1030" y="255" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-54" value="output = self.dropout1(output[:, -1:, :, :])" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1150" y="220" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-55" value="output1(64,12,307,1)&amp;nbsp; (flow)" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1030" y="325" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-57" value="self.end_conv1(output)" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1161" y="285" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WDNzToIDsKdzvG2eh07D-58" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="970" y="330" as="sourcePoint" />
            <mxPoint x="1020" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
